version: "3"

networks:
  all:
    driver: overlay

services:
  bitwarden:
    container_name: bitwarden
    environment:
      ADMIN_TOKEN: ""
      DATABASE_URL: data/db.sqlite3
      DISABLE_ADMIN_TOKEN: "false"
      DOMAIN: "{{ domain }}"
      ENABLE_DB_WAL: "true"
      INVITATIONS_ALLOWED: "false"
      SHOW_PASSWORD_HINT: "false"
      SIGNUPS_ALLOWED: "false"
      SIGNUPS_VERIFY: "false"
      TZ: {{ tz }}
      WEBSOCKET_ENABLED: "true"
    hostname: TypekMatus
    image: vaultwarden/server
    logging:
      driver: json-file
      options:
        max-file: "10"
        max-size: 200k
    networks:
      default: null
    ports:
      mode: host
      target: 80
      published: 8013
      protocol: tcp
      mode: host
      target: 3012
      published: 3012      
      protocol: tcp
    restart: unless-stopped
    volumes:
    - type: bind
      source: /etc/localtime
      target: /etc/localtime
      read_only: true
      bind:
        create_host_path: true
    - type: bind
      source: ~/.config/appdata/bitwarden
      target: /data
      bind:
        create_host_path: true
    - type: bind
      source: ~/storage
      target: /storage
      bind:
        create_host_path: true
  deluge:
    container_name: deluge
    environment:
      PGID: "1000"
      PUID: "1000"
      TZ: {{ tz }}
    hostname: TypekMatus
    image: lscr.io/linuxserver/deluge
    logging:
      driver: json-file
      options:
        max-file: "10"
        max-size: 200k
    networks:
      default: null
    ports:
      mode: host
      target: 6881
      published: 6881      
      protocol: tcp
      mode: host
      target: 6881
      published: 6881      
      protocol: udp
      mode: host
      target: 8112
      published: 8112      
      protocol: tcp
      mode: host
      target: 51413
      published: 5141
      protocol: tcp
      mode: host
      target: 51413
      published: 5141
      protocol: udp
      mode: host
      target: 58846
      published: 5884
      protocol: tcp
      mode: host
      target: 58946
      published: 5894
      protocol: tcp
    restart: unless-stopped
    volumes:
    - type: bind
      source: /etc/localtime
      target: /etc/localtime
      read_only: true
      bind:
        create_host_path: true
    - type: bind
      source: ~/.config/appdata/deluge
      target: /config
      bind:
        create_host_path: true
    - type: bind
      source: ~/storage
      target: /storage
      bind:
        create_host_path: true
  fail2ban:
    cap_add:
    - NET_ADMIN
    - NET_RAW
    container_name: fail2ban
    environment:
      PGID: "1000"
      PUID: "1000"
      TZ: {{ tz }}
    image: lscr.io/linuxserver/fail2ban
    logging:
      driver: json-file
      options:
        max-file: "10"
        max-size: 200k
    network_mode: host
    restart: unless-stopped
    volumes:
    - type: bind
      source: /etc/localtime
      target: /etc/localtime
      read_only: true
      bind:
        create_host_path: true
    - type: bind
      source: /var/log
      target: /var/log
      read_only: true
      bind:
        create_host_path: true
    - type: bind
      source: ~/.config/appdata/fail2ban
      target: /config
      bind:
        create_host_path: true
    - type: bind
      source: ~/storage
      target: /storage
      bind:
        create_host_path: true
  gitea:
    container_name: gitea
    environment:
      TZ: {{ tz }}
      USER_GID: "1000"
      USER_UID: "1000"
    hostname: TypekMatus
    image: gitea/gitea
    logging:
      driver: json-file
      options:
        max-file: "10"
        max-size: 200k
    networks:
      default: null
    ports:
      mode: host
      target: 3000
      published: 3000      
      protocol: tcp
    restart: unless-stopped
    volumes:
    - type: bind
      source: /etc/localtime
      target: /etc/localtime
      read_only: true
      bind:
        create_host_path: true
    - type: bind
      source: /etc/timezone
      target: /etc/timezone
      read_only: true
      bind:
        create_host_path: true
    - type: bind
      source: ~/.config/appdata/gitea
      target: /data
      bind:
        create_host_path: true
    - type: bind
      source: ~/storage
      target: /storage
      bind:
        create_host_path: true
  heimdall:
    container_name: heimdall
    environment:
      PGID: "1000"
      PUID: "1000"
      TZ: {{ tz }}
    hostname: TypekMatus
    image: lscr.io/linuxserver/heimdall
    logging:
      driver: json-file
      options:
        max-file: "10"
        max-size: 200k
    networks:
      default: null
    ports:
      mode: host
      target: 80
      published: 8002      
      protocol: tcp
      mode: host
      target: 443
      published: 447     
      protocol: tcp
    restart: unless-stopped
    volumes:
    - type: bind
      source: /etc/localtime
      target: /etc/localtime
      read_only: true
      bind:
        create_host_path: true
    - type: bind
      source: ~/.config/appdata/heimdall
      target: /config
      bind:
        create_host_path: true
    - type: bind
      source: ~/storage
      target: /storage
      bind:
        create_host_path: true
  jellyfin:
    container_name: jellyfin
    environment:
      PGID: "1000"
      PUID: "1000"
      TZ: {{ tz }}
    hostname: TypekMatus
    image: lscr.io/linuxserver/jellyfin
    logging:
      driver: json-file
      options:
        max-file: "10"
        max-size: 200k
    networks:
      default: null
    ports:
      mode: host
      target: 8096
      published: 8096      
      protocol: tcp
      mode: host
      target: 8920
      published: 8920      
      protocol: tcp
    restart: unless-stopped
    volumes:
    - type: bind
      source: /etc/localtime
      target: /etc/localtime
      read_only: true
      bind:
        create_host_path: true
    - type: bind
      source: ~/.config/appdata/jellyfin
      target: /config
      bind:
        create_host_path: true
    - type: bind
      source: ~/storage
      target: /storage
      bind:
        create_host_path: true
    - type: bind
      source: /tmp
      target: /transcode
      bind:
        create_host_path: true
  nextcloud:
    container_name: nextcloud
    environment:
      PGID: "1000"
      PUID: "1000"
      TZ: {{ tz }}
    hostname: TypekMatus
    image: lscr.io/linuxserver/nextcloud
    logging:
      driver: json-file
      options:
        max-file: "10"
        max-size: 200k
    networks:
      default: null
    ports:
      mode: host
      target: 443
      published: 444   
      protocol: tcp
    restart: unless-stopped
    volumes:
    - type: bind
      source: /etc/localtime
      target: /etc/localtime
      read_only: true
      bind:
        create_host_path: true
    - type: bind
      source: ~/.config/appdata/nextcloud
      target: /config
      bind:
        create_host_path: true
    - type: bind
      source: ~/storage
      target: /storage
      bind:
        create_host_path: true
    - type: bind
      source: /mnt/nextcloud
      target: /data
      bind:
        create_host_path: true
  unificontroller:
    container_name: unificontroller
    environment:
      PGID: "1000"
      PUID: "1000"
      TZ: {{ tz }}
    hostname: TypekMatus
    image: lscr.io/linuxserver/unifi-controller
    logging:
      driver: json-file
      options:
        max-file: "10"
        max-size: 200k
    networks:
      default: null
    ports:
      mode: host
      target: 3478
      published: 3478      
      protocol: udp
      mode: host
      target: 6789
      published: 6789      
      protocol: tcp
      mode: host
      target: 6969
      published: 6969      
      protocol: tcp
      mode: host
      target: 8081
      published: 8081      
      protocol: tcp
      mode: host
      target: 8443
      published: 8443      
      protocol: tcp
      mode: host
      target: 8843
      published: 8843      
      protocol: tcp
      mode: host
      target: 8880
      published: 8880      
      protocol: tcp
      mode: host
      target: 10001
      published: 1000
      protocol: udp
    restart: unless-stopped
    volumes:
    - type: bind
      source: /etc/localtime
      target: /etc/localtime
      read_only: true
      bind:
        create_host_path: true
    - type: bind
      source: ~/.config/appdata/unificontroller
      target: /config
      bind:
        create_host_path: true
    - type: bind
      source: ~/storage
      target: /storage
      bind:
        create_host_path: true
  
  uptimekuma:
    container_name: uptimekuma
    environment:
      PGID: "1000"
      PUID: "1000"
      TZ: {{ tz }}
    hostname: TypekMatus
    image: louislam/uptime-kuma
    logging:
      driver: json-file
      options:
        max-file: "10"
        max-size: 200k
    networks:
      default: null
    ports:
      mode: host
      target: 3001
      published: 3001      
      protocol: tcp
    restart: unless-stopped
    volumes:
    - type: bind
      source: ~/.config/appdata/uptimekuma
      target: /app/data
      bind:
        create_host_path: true
    - type: bind
      source: ~/storage
      target: /storage
      bind:
        create_host_path: true
    - type: bind
      source: /etc/localtime
      target: /etc/localtime
      read_only: true
      bind:
        create_host_path: true
ports:
  - "8000:8000"
  - "3001:3001"
  - "8096:8920"
  - "8843:8843"
  - "8880:8880"
  - "10001:1000"
  - "6969:6969"
  - 
